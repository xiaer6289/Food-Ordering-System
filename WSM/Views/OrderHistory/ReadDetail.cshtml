@using WSM.Models
@model OrderDetail

@{
    ViewBag.Title = "Print Order Details";
    Layout = null;
}

<link rel="stylesheet" href="~/css/app.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
<script src="~/js/app.js"></script>

<div style="text-align:center;" class="read-details-header">
    <h1><strong>Food Restaurant</strong></h1>
    <h6>Address</h6>
    
    <div class="order-info">
        <span style="text-align:left">Date: @Model.OrderDate.ToString("yyyy-MM-dd HH:mm")</span>
        <span style="text-align:right;">Order ID: @Model.Id</span>
    </div>
    <div class="additional-info">
        <span>Table No: @Model.SeatNo</span>
        <span>Status: @Model.Status</span>
    </div>
</div>

<hr/>

<table class="detail-table">
    <tr>
        <th><h4>No.</h4></th>
        <th><h4>Food Ordered</h4></th>
        <th><h4>Quantity</h4></th>
        <th><h4>Unit Price (RM)</h4></th>
        <th><h4>Subtotal (RM)</h4></th>
    </tr>
    
    @for(int i = 0; i < Model.OrderItems.Count; i++)
    {
        var item = Model.OrderItems.ElementAt(i);
        <tr>
            <td>@(i + 1)</td>
            <td>@item.Food?.Name</td>
            <td>@item.Quantity</td>
            <td>@item.Food?.Price.ToString("F2")</td>
            <td>@item.SubTotal.ToString("F2")</td>
        </tr>
    }

    <tr>
        <td colspan="4" style="text-align:right">
            <strong>Subtotal:</strong>
        </td>
        <td>
            RM @Model.TotalPrice.ToString("F2")
        </td>
    </tr>
    <tr>
        <td colspan="4" style="text-align:right">
            <strong>Service charge (6%):</strong>
        </td>
        <td>
            RM @((Model.TotalPrice * 0.06M).ToString("F2"))
        </td>
    </tr>
    <tr>
        <td colspan="4" style="text-align:right">
            <strong>Total:</strong>
        </td>
        <td>
            <strong>RM @((Model.TotalPrice * 1.06M).ToString("F2"))</strong>
        </td>
    </tr>
</table>

<div class="payment-info">
    <p>Payment Method: @(Model.Payment?.PaymentMethod ?? "Pending")</p>
</div>

<button type="button" onclick="generatePDF()" id="savePdf">Print in PDF</button>
