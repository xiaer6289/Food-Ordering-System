@model List<WSM.Models.Food>

<h2>Food List</h2>

<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price (RM)</th>
            <th>Description</th>
            <th>Category</th>
            <th>Quantity</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var food in Model)
        {
            <tr>
                <td>@food.Id</td>
                <td>@food.Name</td>
                <td>@food.Price</td>
                <td>@food.Description</td>
                <td>@food.CategoryId</td>
                <td>
                    <form method="post" action="/Order/UpdateCart">
                        <input type="hidden" name="foodId" value="@food.Id" />
                        <input type="number" name="quantity"
                               value="@(ViewBag.Cart != null && ViewBag.Cart.ContainsKey(food.Id.ToString())
                                                                   ? ViewBag.Cart[food.Id.ToString()]
                                                                   : 0)"
                           min="0" max="10" style="width: 60px;" />
                    <button type="submit">Add/Update</button>
                </form>
            </td>
        </tr>
                }
    </tbody>
</table>

<h3>Current Cart</h3>
@if (ViewBag.Cart != null && ViewBag.Cart.Count > 0)
{
    <ul>
        @foreach (var item in ViewBag.Cart)
        {
            <li>Food ID: @item.Key, Quantity: @item.Value</li>
        }
    </ul>
}
else
{
    <p>Cart is empty</p>
}

<a href="/Order/Cart">View Cart</a>

<form method="post" action="/Payment/CreateCheckoutSession">
    <div>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required />
    </div>
    <button type="submit">Checkout</button>
</form>
